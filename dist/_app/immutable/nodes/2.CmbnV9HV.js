import{f as pt,b as ct}from"../chunks/CFZaivjI.js";import{o as Et}from"../chunks/4kmj9zwE.js";import{s as K,b as Z,e as _t,f as Y,y as Nt,D as $t,n as J,B as P,h as Ct,o as It,N as x,X as At,Y as zt,Z as Dt,_ as lt,m as Q,p as L,q as Mt,$ as bt,z as xt,a0 as Rt,a1 as tt,w as gt,a2 as Ot,a3 as Ft,a4 as dt,a5 as Pt,a6 as jt,v as qt,a7 as Bt,G as Ht,a8 as Wt,a9 as Lt,j as Ut,i as Yt,E as Vt,aa as Gt,ab as Xt,ac as Kt,a as Zt,ad as Jt,ae as Qt,af as te,ag as ee,ah as ae,F as U,A as re,ai as W,aj as ne,u as se,I as ie,ak as N,U as F,W as M,S as ut,C as oe,al as ce,V as R}from"../chunks/NwSd7mST.js";import{a as le,d as de,s as G}from"../chunks/DXAOCrGv.js";function ue(e){var t=_t,a=Y;K(null),Z(null);try{return e()}finally{K(t),Z(a)}}function fe(e,t,a,i){for(var l=[],d=t.length,o=0;o<d;o++)jt(t[o].e,l,!0);var v=d>0&&l.length===0&&a!==null;if(v){var _=a.parentNode;qt(_),_.append(a),i.clear(),B(e,t[0].prev,t[d-1].next)}Bt(l,()=>{for(var u=0;u<d;u++){var r=t[u];v||(i.delete(r.k),B(e,r.prev,r.next)),Ht(r.e,!v)}})}function ve(e,t,a,i,l,d=null){var o=e,v={flags:t,items:new Map,first:null};{var _=e;o=P?J(Ct(_)):_.appendChild(Nt())}P&&It();var u=null,r=!1,g=At(()=>{var n=a();return Yt(n)?n:n==null?[]:gt(n)});$t(()=>{var n=x(g),s=n.length;if(r&&s===0)return;r=s===0;let c=!1;if(P){var b=zt(o)===Dt;b!==(s===0)&&(o=lt(),J(o),Q(!1),c=!0)}if(P){for(var y=null,f,h=0;h<s;h++){if(L.nodeType===8&&L.data===Mt){o=L,c=!0,Q(!1);break}var E=n[h],C=i(E,h);f=yt(L,v,y,null,E,C,h,l,t,a),v.items.set(C,f),y=f}s>0&&J(lt())}P||he(n,v,o,l,t,i,a),d!==null&&(s===0?u?bt(u):u=xt(()=>d(o)):u!==null&&Rt(u,()=>{u=null})),c&&Q(!0),x(g)}),P&&(o=L)}function he(e,t,a,i,l,d,o){var v=e.length,_=t.items,u=t.first,r=u,g,n=null,s=[],c=[],b,y,f,h;for(h=0;h<v;h+=1){if(b=e[h],y=d(b,h),f=_.get(y),f===void 0){var E=r?r.e.nodes_start:a;n=yt(E,t,n,n===null?t.first:n.next,b,y,h,i,l,o),_.set(y,n),s=[],c=[],r=n.next;continue}if(me(f,b,h),(f.e.f&tt)!==0&&bt(f.e),f!==r){if(g!==void 0&&g.has(f)){if(s.length<c.length){var C=c[0],I;n=C.prev;var q=s[0],A=s[s.length-1];for(I=0;I<s.length;I+=1)ft(s[I],C,a);for(I=0;I<c.length;I+=1)g.delete(c[I]);B(t,q.prev,A.next),B(t,n,q),B(t,A,C),r=C,n=A,h-=1,s=[],c=[]}else g.delete(f),ft(f,r,a),B(t,f.prev,f.next),B(t,f,n===null?t.first:n.next),B(t,n,f),n=f;continue}for(s=[],c=[];r!==null&&r.k!==y;)(r.e.f&tt)===0&&(g??(g=new Set)).add(r),c.push(r),r=r.next;if(r===null)continue;f=r}s.push(f),n=f,r=f.next}if(r!==null||g!==void 0){for(var z=g===void 0?[]:gt(g);r!==null;)(r.e.f&tt)===0&&z.push(r),r=r.next;var O=z.length;if(O>0){var V=v===0?a:null;fe(t,z,V,_)}}Y.first=t.first&&t.first.e,Y.last=n&&n.e}function me(e,t,a,i){Ot(e.v,t),e.i=a}function yt(e,t,a,i,l,d,o,v,_,u){var r=(_&Wt)!==0,g=(_&Lt)===0,n=r?g?Ft(l,!1,!1):dt(l):l,s=(_&Pt)===0?o:dt(o),c={i:s,v:n,k:d,a:null,e:null,prev:a,next:i};try{return c.e=xt(()=>v(e,n,s,u),P),c.e.prev=a&&a.e,c.e.next=i&&i.e,a===null?t.first=c:(a.next=c,a.e.next=c.e),i!==null&&(i.prev=c,i.e.prev=c.e),c}finally{}}function ft(e,t,a){for(var i=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,d=e.e.nodes_start;d!==i;){var o=Ut(d);l.before(d),d=o}}function B(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}function pe(e,t,a){var i=e==null?"":""+e;return i===""?null:i}function et(e,t,a,i,l,d){var o=e.__className;if(P||o!==a||o===void 0){var v=pe(a);(!P||v!==e.getAttribute("class"))&&(v==null?e.removeAttribute("class"):e.className=v),e.__className=a}return d}const _e=()=>performance.now(),j={tick:e=>requestAnimationFrame(e),now:()=>_e(),tasks:new Set};function wt(){const e=j.now();j.tasks.forEach(t=>{t.c(e)||(j.tasks.delete(t),t.f())}),j.tasks.size!==0&&j.tick(wt)}function be(e){let t;return j.tasks.size===0&&j.tick(wt),{promise:new Promise(a=>{j.tasks.add(t={c:e,f:a})}),abort(){j.tasks.delete(t)}}}function X(e,t){ue(()=>{e.dispatchEvent(new CustomEvent(t))})}function xe(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function vt(e){const t={},a=e.split(";");for(const i of a){const[l,d]=i.split(":");if(!l||d===void 0)break;const o=xe(l.trim());t[o]=d.trim()}return t}const ge=e=>e;function ht(e,t,a,i){var l=(e&Qt)!==0,d=(e&te)!==0,o=l&&d,v=(e&Jt)!==0,_=o?"both":l?"in":"out",u,r=t.inert,g=t.style.overflow,n,s;function c(){var E=_t,C=Y;K(null),Z(null);try{return u??(u=a()(t,(i==null?void 0:i())??{},{direction:_}))}finally{K(E),Z(C)}}var b={is_global:v,in(){var E;if(t.inert=r,!l){s==null||s.abort(),(E=s==null?void 0:s.reset)==null||E.call(s);return}d||n==null||n.abort(),X(t,"introstart"),n=at(t,c(),s,1,()=>{X(t,"introend"),n==null||n.abort(),n=u=void 0,t.style.overflow=g})},out(E){if(!d){E==null||E(),u=void 0;return}t.inert=!0,X(t,"outrostart"),s=at(t,c(),n,0,()=>{X(t,"outroend"),E==null||E()})},stop:()=>{n==null||n.abort(),s==null||s.abort()}},y=Y;if((y.transitions??(y.transitions=[])).push(b),l&&le){var f=v;if(!f){for(var h=y.parent;h&&(h.f&Vt)!==0;)for(;(h=h.parent)&&(h.f&Gt)===0;);f=!h||(h.f&Xt)!==0}f&&Kt(()=>{Zt(()=>b.in())})}}function at(e,t,a,i,l){var d=i===1;if(ee(t)){var o,v=!1;return ae(()=>{if(!v){var y=t({direction:d?"in":"out"});o=at(e,y,a,i,l)}}),{abort:()=>{v=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(a==null||a.deactivate(),!(t!=null&&t.duration))return l(),{abort:U,deactivate:U,reset:U,t:()=>i};const{delay:_=0,css:u,tick:r,easing:g=ge}=t;var n=[];if(d&&a===void 0&&(r&&r(0,1),u)){var s=vt(u(0,1));n.push(s,s)}var c=()=>1-i,b=e.animate(n,{duration:_,fill:"forwards"});return b.onfinish=()=>{b.cancel();var y=(a==null?void 0:a.t())??1-i;a==null||a.abort();var f=i-y,h=t.duration*Math.abs(f),E=[];if(h>0){var C=!1;if(u)for(var I=Math.ceil(h/16.666666666666668),q=0;q<=I;q+=1){var A=y+f*g(q/I),z=vt(u(A,1-A));E.push(z),C||(C=z.overflow==="hidden")}C&&(e.style.overflow="hidden"),c=()=>{var O=b.currentTime;return y+f*g(O/h)},r&&be(()=>{if(b.playState!=="running")return!1;var O=c();return r(O,1-O),!0})}b=e.animate(E,{duration:h,fill:"forwards"}),b.onfinish=()=>{c=()=>i,r==null||r(i,1-i),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=U)},deactivate:()=>{l=U},reset:()=>{i===0&&(r==null||r(1,0))},t:()=>c()}}const ye=e=>e;function we(e){const t=e-1;return t*t*t+1}function mt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Se(e,{delay:t=0,duration:a=400,easing:i=ye}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:a,easing:i,css:d=>`opacity: ${d*l}`}}function ke(e,{delay:t=0,duration:a=400,easing:i=we,x:l=0,y:d=0,opacity:o=0}={}){const v=getComputedStyle(e),_=+v.opacity,u=v.transform==="none"?"":v.transform,r=_*(1-o),[g,n]=mt(l),[s,c]=mt(d);return{delay:t,duration:a,easing:i,css:(b,y)=>`
			transform: ${u} translate(${(1-b)*g}${n}, ${(1-b)*s}${c});
			opacity: ${_-r*y}`}}var Te=(e,t)=>N(t,"Charmer"),Ee=(e,t)=>N(t,"Miles"),Ne=(e,t,a)=>t(x(a).id),$e=pt('<tr class="bg-zinc-100 dark:bg-zinc-800"><td class="px-2 py-1 align-middle text-base text-zinc-900 dark:text-zinc-100"> </td><td class="max-w-[7.5rem] truncate px-2 py-1 align-middle text-base whitespace-nowrap text-zinc-900 sm:max-w-none dark:text-zinc-100"> </td><td class="px-2 py-1 text-center align-middle text-base"><span> </span></td><td class="px-2 py-1 text-center align-middle"><div class="mx-1 h-6 w-px bg-zinc-500 dark:bg-zinc-400"></div></td><td class="px-2 py-1 text-center align-middle text-base"><button class="rounded-md bg-red-500 px-1 py-1 text-base text-white transition-all duration-100 ease-in-out hover:bg-red-600 active:scale-98 active:shadow-sm active:brightness-90 dark:bg-red-700 dark:hover:bg-red-800">Delete</button></td></tr>'),Ce=pt(`<h1 class="text-semibold text-center font-mono text-4xl"> </h1> <div class="mx-2 my-2 flex w-[calc(100vw-1rem)] flex-row justify-center gap-2"><button type="button">Charmer</button> <button type="button">Miles</button></div> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-green-500 p-2 text-xl text-white transition-all duration-100 ease-in-out active:scale-98 active:shadow-sm active:brightness-90">Start</button> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-red-500 p-2 text-xl text-white
               transition-all duration-100 ease-in-out
               active:scale-98 active:shadow-sm active:brightness-90">Stop & Save</button> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-yellow-500 p-2 text-xl text-white
               transition-all duration-100 ease-in-out
               active:scale-98 active:shadow-sm active:brightness-90">Reset</button> <table class="mt-4 w-full border-separate border-spacing-y-2 rounded-lg bg-zinc-50 text-left dark:bg-zinc-900"><thead><tr><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Time</th><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Date</th><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Horse</th><th class="px-2 py-1"></th><th class="px-2 py-1"></th></tr></thead><tbody></tbody></table>`,1);function Me(e,t){re(t,!0);function a(){return new Promise((m,p)=>{const w="ridingtracker",T="rides",S="timer";let k=indexedDB.open(w,2);k.onupgradeneeded=()=>{const $=k.result;$.objectStoreNames.contains(T)||$.createObjectStore(T,{keyPath:"id"}),$.objectStoreNames.contains(S)||$.createObjectStore(S,{keyPath:"key"})},k.onsuccess=()=>{const $=k.result;!$.objectStoreNames.contains(T)||!$.objectStoreNames.contains(S)?($.close(),indexedDB.deleteDatabase(w).onsuccess=()=>{const D=indexedDB.open(w,2);D.onupgradeneeded=()=>{const H=D.result;H.createObjectStore(T,{keyPath:"id"}),H.createObjectStore(S,{keyPath:"key"})},D.onsuccess=()=>m(D.result),D.onerror=()=>p(D.error)}):m($)},k.onerror=()=>p(k.error)})}async function i(){const m=await a();return new Promise(p=>{const S=m.transaction("rides","readonly").objectStore("rides").getAll();S.onsuccess=()=>{const k=S.result.map($=>({time:$.time,date:new Date($.date),horse:$.horse,id:$.id}));p(k)},S.onerror=()=>p([])})}async function l(m){const p=await a();return new Promise(w=>{const T=p.transaction("rides","readwrite"),S=T.objectStore("rides");S.clear(),m.forEach(k=>{S.put({id:k.id,time:k.time,date:k.date instanceof Date?k.date.toISOString():k.date,horse:k.horse})}),T.oncomplete=()=>w()})}async function d(m){const p=await a();return new Promise(w=>{const T=p.transaction("timer","readwrite");T.objectStore("timer").put({key:"startTime",value:m}),T.oncomplete=()=>w()})}async function o(){const m=await a();return new Promise(p=>{const S=m.transaction("timer","readonly").objectStore("timer").get("startTime");S.onsuccess=()=>{S.result?p(S.result.value):p(null)},S.onerror=()=>p(null)})}async function v(){const m=await a();return new Promise(p=>{const w=m.transaction("timer","readwrite");w.objectStore("timer").delete("startTime"),w.oncomplete=()=>p()})}let _=W("00:00:00"),u,r=W(ne([])),g=W("Charmer"),n=W(0),s=W(null),c=W(!1);function b(){if(x(s)!==null){const p=Date.now()-x(s),w=Math.floor(p/1e3),T=Math.floor(w/3600),S=Math.floor(w%3600/60),k=w%60;if(x(c)){const $=Math.floor(p%1e3/10).toString().padStart(2,"0");N(_,`${T.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}.${$}`)}else N(_,`${T.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}:${k.toString().padStart(2,"0")}`)}else N(_,"00:00:00")}function y(){if(!u){if(x(s)===null){const m=Date.now();N(s,m,!0),d(m)}N(c,!0),b(),u=setInterval(()=>{b()},10)}}Et(async()=>{N(r,await i(),!0),x(r).length>0?N(n,Math.max(...x(r).map(m=>m.id))+1):N(n,0),N(s,await o(),!0),b(),x(s)!==null&&y()}),se(()=>{l(x(r))});function f(m){const w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m.getDay()],T=String(m.getMonth()+1).padStart(2,"0"),S=String(m.getDate()).padStart(2,"0"),k=String(m.getFullYear()).slice(-2);return`${w}, ${T}/${S}/${k}`}function h(){u&&(clearInterval(u),u=void 0),N(c,!1),x(s)!==null&&(b(),N(r,[...x(r),{time:x(_).split(".")[0],date:new Date,horse:x(g),id:x(n)}],!0),ce(n),N(s,null),v(),N(_,"00:00:00"))}function E(m){N(r,x(r).filter(p=>p.id!==m),!0),x(r).length>0?N(n,Math.max(...x(r).map(p=>p.id))+1):N(n,0)}var C=Ce(),I=ie(C),q=F(I,!0);R(I);var A=M(I,2),z=F(A);z.__click=[Te,g];var O=M(z,2);O.__click=[Ee,g],R(A);var V=M(A,2);V.__click=y;var rt=M(V,2);rt.__click=h;var nt=M(rt,2);nt.__click=()=>{u&&(clearInterval(u),u=void 0),N(c,!1),N(s,null),v(),N(_,"00:00:00")};var st=M(nt,2),it=M(F(st));ve(it,21,()=>x(r),m=>m.id,(m,p)=>{var w=$e(),T=F(w),S=F(T,!0);R(T);var k=M(T),$=F(k,!0);R(k);var D=M(k),H=F(D),St=F(H,!0);R(H),R(D);var ot=M(D,2),kt=F(ot);kt.__click=[Ne,E,p],R(ot),R(w),ut(Tt=>{G(S,x(p).time),G($,Tt),et(H,1,`rounded-md px-1 py-1 font-semibold
						${x(p).horse==="Charmer"?"bg-orange-400 text-white dark:bg-orange-500 dark:text-zinc-900":"bg-yellow-900 text-white dark:bg-yellow-800 dark:text-yellow-200"}`),G(St,x(p).horse)},[()=>f(x(p).date)]),ht(1,w,()=>Se,()=>({duration:125})),ht(2,w,()=>ke,()=>({x:-40,duration:125})),ct(m,w)}),R(it),R(st),ut(()=>{G(q,x(_)),et(z,1,`w-1/2 rounded-md p-2 text-xl transition-all duration-100 ease-in-out active:scale-98 active:shadow-sm active:brightness-90
			${x(g)==="Charmer"?"bg-orange-400 text-white":"bg-gray-100 text-gray-400"}`),et(O,1,`w-1/2 rounded-md p-2 text-xl transition-all duration-100 ease-in-out active:scale-98 active:shadow-sm active:brightness-90
			${x(g)==="Miles"?"bg-yellow-900 text-white":"bg-gray-100 text-gray-400"}`)}),ct(e,C),oe()}de(["click"]);export{Me as component};
