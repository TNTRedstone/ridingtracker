import{f as _e,b as oe}from"../chunks/CFZaivjI.js";import{o as Ee}from"../chunks/4kmj9zwE.js";import{s as K,b as Z,e as pe,f as U,y as Te,D as Ne,n as Q,B,h as Ce,o as Ie,N as p,X as Ae,Y as ze,Z as $e,_ as ce,m as ee,p as W,q as De,$ as be,z as me,a0 as Re,a1 as te,w as xe,a2 as Me,a3 as Oe,a4 as le,a5 as Fe,a6 as Be,v as qe,a7 as He,G as Pe,a8 as We,a9 as Le,j as Ue,i as Ye,E as Ve,aa as je,ab as Ge,ac as Xe,a as Ke,ad as Ze,ae as Je,af as Qe,ag as et,ah as tt,F as L,A as at,ai as P,aj as rt,u as st,I as nt,ak as w,U as F,W as $,S as de,C as it,al as j,V as D}from"../chunks/NwSd7mST.js";import{a as ot,d as ct,s as G}from"../chunks/DXAOCrGv.js";function lt(t){var e=pe,a=U;K(null),Z(null);try{return t()}finally{K(e),Z(a)}}function dt(t,e,a,n){for(var l=[],c=e.length,i=0;i<c;i++)Be(e[i].e,l,!0);var u=c>0&&l.length===0&&a!==null;if(u){var b=a.parentNode;qe(b),b.append(a),n.clear(),H(t,e[0].prev,e[c-1].next)}He(l,()=>{for(var f=0;f<c;f++){var r=e[f];u||(n.delete(r.k),H(t,r.prev,r.next)),Pe(r.e,!u)}})}function ut(t,e,a,n,l,c=null){var i=t,u={flags:e,items:new Map,first:null};{var b=t;i=B?Q(Ce(b)):b.appendChild(Te())}B&&Ie();var f=null,r=!1,_=Ae(()=>{var s=a();return Ye(s)?s:s==null?[]:xe(s)});Ne(()=>{var s=p(_),o=s.length;if(r&&o===0)return;r=o===0;let d=!1;if(B){var m=ze(i)===$e;m!==(o===0)&&(i=ce(),Q(i),ee(!1),d=!0)}if(B){for(var x=null,v,h=0;h<o;h++){if(W.nodeType===8&&W.data===De){i=W,d=!0,ee(!1);break}var g=s[h],N=n(g,h);v=ge(W,u,x,null,g,N,h,l,e,a),u.items.set(N,v),x=v}o>0&&Q(ce())}B||ft(s,u,i,l,e,n,a),c!==null&&(o===0?f?be(f):f=me(()=>c(i)):f!==null&&Re(f,()=>{f=null})),d&&ee(!0),p(_)}),B&&(i=W)}function ft(t,e,a,n,l,c,i){var u=t.length,b=e.items,f=e.first,r=f,_,s=null,o=[],d=[],m,x,v,h;for(h=0;h<u;h+=1){if(m=t[h],x=c(m,h),v=b.get(x),v===void 0){var g=r?r.e.nodes_start:a;s=ge(g,e,s,s===null?e.first:s.next,m,x,h,n,l,i),b.set(x,s),o=[],d=[],r=s.next;continue}if(vt(v,m,h),(v.e.f&te)!==0&&be(v.e),v!==r){if(_!==void 0&&_.has(v)){if(o.length<d.length){var N=d[0],T;s=N.prev;var z=o[0],R=o[o.length-1];for(T=0;T<o.length;T+=1)ue(o[T],N,a);for(T=0;T<d.length;T+=1)_.delete(d[T]);H(e,z.prev,R.next),H(e,s,z),H(e,R,N),r=N,s=R,h-=1,o=[],d=[]}else _.delete(v),ue(v,r,a),H(e,v.prev,v.next),H(e,v,s===null?e.first:s.next),H(e,s,v),s=v;continue}for(o=[],d=[];r!==null&&r.k!==x;)(r.e.f&te)===0&&(_??(_=new Set)).add(r),d.push(r),r=r.next;if(r===null)continue;v=r}o.push(v),s=v,r=v.next}if(r!==null||_!==void 0){for(var M=_===void 0?[]:xe(_);r!==null;)(r.e.f&te)===0&&M.push(r),r=r.next;var O=M.length;if(O>0){var Y=u===0?a:null;dt(e,M,Y,b)}}U.first=e.first&&e.first.e,U.last=s&&s.e}function vt(t,e,a,n){Me(t.v,e),t.i=a}function ge(t,e,a,n,l,c,i,u,b,f){var r=(b&We)!==0,_=(b&Le)===0,s=r?_?Oe(l,!1,!1):le(l):l,o=(b&Fe)===0?i:le(i),d={i:o,v:s,k:c,a:null,e:null,prev:a,next:n};try{return d.e=me(()=>u(t,s,o,f),B),d.e.prev=a&&a.e,d.e.next=n&&n.e,a===null?e.first=d:(a.next=d,a.e.next=d.e),n!==null&&(n.prev=d,n.e.prev=d.e),d}finally{}}function ue(t,e,a){for(var n=t.next?t.next.e.nodes_start:a,l=e?e.e.nodes_start:a,c=t.e.nodes_start;c!==n;){var i=Ue(c);l.before(c),c=i}}function H(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function ht(t,e,a){var n=t==null?"":""+t;return n===""?null:n}function ae(t,e,a,n,l,c){var i=t.__className;if(B||i!==a||i===void 0){var u=ht(a);(!B||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):t.className=u),t.__className=a}return c}const _t=()=>performance.now(),q={tick:t=>requestAnimationFrame(t),now:()=>_t(),tasks:new Set};function ye(){const t=q.now();q.tasks.forEach(e=>{e.c(t)||(q.tasks.delete(e),e.f())}),q.tasks.size!==0&&q.tick(ye)}function pt(t){let e;return q.tasks.size===0&&q.tick(ye),{promise:new Promise(a=>{q.tasks.add(e={c:t,f:a})}),abort(){q.tasks.delete(e)}}}function X(t,e){lt(()=>{t.dispatchEvent(new CustomEvent(e))})}function bt(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function fe(t){const e={},a=t.split(";");for(const n of a){const[l,c]=n.split(":");if(!l||c===void 0)break;const i=bt(l.trim());e[i]=c.trim()}return e}const mt=t=>t;function ve(t,e,a,n){var l=(t&Je)!==0,c=(t&Qe)!==0,i=l&&c,u=(t&Ze)!==0,b=i?"both":l?"in":"out",f,r=e.inert,_=e.style.overflow,s,o;function d(){var g=pe,N=U;K(null),Z(null);try{return f??(f=a()(e,(n==null?void 0:n())??{},{direction:b}))}finally{K(g),Z(N)}}var m={is_global:u,in(){var g;if(e.inert=r,!l){o==null||o.abort(),(g=o==null?void 0:o.reset)==null||g.call(o);return}c||s==null||s.abort(),X(e,"introstart"),s=re(e,d(),o,1,()=>{X(e,"introend"),s==null||s.abort(),s=f=void 0,e.style.overflow=_})},out(g){if(!c){g==null||g(),f=void 0;return}e.inert=!0,X(e,"outrostart"),o=re(e,d(),s,0,()=>{X(e,"outroend"),g==null||g()})},stop:()=>{s==null||s.abort(),o==null||o.abort()}},x=U;if((x.transitions??(x.transitions=[])).push(m),l&&ot){var v=u;if(!v){for(var h=x.parent;h&&(h.f&Ve)!==0;)for(;(h=h.parent)&&(h.f&je)===0;);v=!h||(h.f&Ge)!==0}v&&Xe(()=>{Ke(()=>m.in())})}}function re(t,e,a,n,l){var c=n===1;if(et(e)){var i,u=!1;return tt(()=>{if(!u){var x=e({direction:c?"in":"out"});i=re(t,x,a,n,l)}}),{abort:()=>{u=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return l(),{abort:L,deactivate:L,reset:L,t:()=>n};const{delay:b=0,css:f,tick:r,easing:_=mt}=e;var s=[];if(c&&a===void 0&&(r&&r(0,1),f)){var o=fe(f(0,1));s.push(o,o)}var d=()=>1-n,m=t.animate(s,{duration:b,fill:"forwards"});return m.onfinish=()=>{m.cancel();var x=(a==null?void 0:a.t())??1-n;a==null||a.abort();var v=n-x,h=e.duration*Math.abs(v),g=[];if(h>0){var N=!1;if(f)for(var T=Math.ceil(h/16.666666666666668),z=0;z<=T;z+=1){var R=x+v*_(z/T),M=fe(f(R,1-R));g.push(M),N||(N=M.overflow==="hidden")}N&&(t.style.overflow="hidden"),d=()=>{var O=m.currentTime;return x+v*_(O/h)},r&&pt(()=>{if(m.playState!=="running")return!1;var O=d();return r(O,1-O),!0})}m=t.animate(g,{duration:h,fill:"forwards"}),m.onfinish=()=>{d=()=>n,r==null||r(n,1-n),l()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=L)},deactivate:()=>{l=L},reset:()=>{n===0&&(r==null||r(1,0))},t:()=>d()}}const xt=t=>t;function gt(t){const e=t-1;return e*e*e+1}function he(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function yt(t,{delay:e=0,duration:a=400,easing:n=xt}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:a,easing:n,css:c=>`opacity: ${c*l}`}}function wt(t,{delay:e=0,duration:a=400,easing:n=gt,x:l=0,y:c=0,opacity:i=0}={}){const u=getComputedStyle(t),b=+u.opacity,f=u.transform==="none"?"":u.transform,r=b*(1-i),[_,s]=he(l),[o,d]=he(c);return{delay:e,duration:a,easing:n,css:(m,x)=>`
			transform: ${f} translate(${(1-m)*_}${s}, ${(1-m)*o}${d});
			opacity: ${b-r*x}`}}var kt=(t,e)=>w(e,"Charmer"),St=(t,e)=>w(e,"Miles"),Et=(t,e,a)=>e(p(a).id),Tt=_e('<tr class="bg-zinc-100 dark:bg-zinc-800"><td class="px-2 py-1 align-middle text-base text-zinc-900 dark:text-zinc-100"> </td><td class="max-w-[7.5rem] truncate px-2 py-1 align-middle text-base whitespace-nowrap text-zinc-900 sm:max-w-none dark:text-zinc-100"> </td><td class="px-2 py-1 text-center align-middle text-base"><span> </span></td><td class="px-2 py-1 text-center align-middle"><div class="mx-1 h-6 w-px bg-zinc-500 dark:bg-zinc-400"></div></td><td class="px-2 py-1 text-center align-middle text-base"><button class="rounded-md bg-red-500 px-1 py-1 text-base text-white transition-all duration-100 ease-in-out hover:bg-red-600 active:scale-98 active:shadow-sm active:brightness-90 dark:bg-red-700 dark:hover:bg-red-800">Delete</button></td></tr>'),Nt=_e(`<h1 class="text-semibold text-center font-mono text-4xl"> </h1> <div class="mx-2 my-2 flex w-[calc(100vw-1rem)] flex-row justify-center gap-2"><button type="button">Charmer</button> <button type="button">Miles</button></div> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-green-500 p-2 text-xl text-white
               transition-all duration-100 ease-in-out
               active:scale-98 active:shadow-sm active:brightness-90">Start</button> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-red-500 p-2 text-xl text-white
               transition-all duration-100 ease-in-out
               active:scale-98 active:shadow-sm active:brightness-90">Stop & Save</button> <button class="m-2 w-[calc(100vw-1rem)] rounded-md bg-yellow-500 p-2 text-xl text-white
               transition-all duration-100 ease-in-out
               active:scale-98 active:shadow-sm active:brightness-90">Reset</button> <table class="mt-4 w-full border-separate border-spacing-y-2 rounded-lg bg-zinc-50 text-left dark:bg-zinc-900"><thead><tr><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Time</th><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Date</th><th class="px-2 py-1 text-zinc-900 dark:text-zinc-200">Horse</th><th class="px-2 py-1"></th><th class="px-2 py-1"></th></tr></thead><tbody></tbody></table>`,1);function $t(t,e){at(e,!0);function a(){return new Promise((k,S)=>{const C="ridingtracker",I="rides";let E=indexedDB.open(C,1);E.onupgradeneeded=()=>{const y=E.result;y.objectStoreNames.contains(I)||y.createObjectStore(I,{keyPath:"id"})},E.onsuccess=()=>{const y=E.result;y.objectStoreNames.contains(I)?k(y):(y.close(),indexedDB.deleteDatabase(C).onsuccess=()=>{const A=indexedDB.open(C,1);A.onupgradeneeded=()=>{A.result.createObjectStore(I,{keyPath:"id"})},A.onsuccess=()=>k(A.result),A.onerror=()=>S(A.error)})},E.onerror=()=>S(E.error)})}async function n(){const k=await a();return new Promise(S=>{const E=k.transaction("rides","readonly").objectStore("rides").getAll();E.onsuccess=()=>{const y=E.result.map(A=>({time:A.time,date:new Date(A.date),horse:A.horse,id:A.id}));S(y)},E.onerror=()=>S([])})}async function l(k){const S=await a();return new Promise(C=>{const I=S.transaction("rides","readwrite"),E=I.objectStore("rides");E.clear(),k.forEach(y=>{E.put({id:y.id,time:y.time,date:y.date instanceof Date?y.date.toISOString():y.date,horse:y.horse})}),I.oncomplete=()=>C()})}let c=P("00:00:00"),i=P(0),u=P(0),b=P(0),f,r=P(rt([])),_=P("Charmer"),s=P(0);Ee(async()=>{w(r,await n(),!0),p(r).length>0?w(s,Math.max(...p(r).map(k=>k.id))+1):w(s,0)}),st(()=>{l(p(r))});function o(k){const C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][k.getDay()],I=String(k.getMonth()+1).padStart(2,"0"),E=String(k.getDate()).padStart(2,"0"),y=String(k.getFullYear()).slice(-2);return`${C}, ${I}/${E}/${y}`}function d(){f||(f=setInterval(()=>{j(i),p(i)===60&&(j(u),w(i,0)),p(u)===60&&(j(b),w(u,0)),w(c,`${p(b).toString().padStart(2,"0")}:${p(u).toString().padStart(2,"0")}:${p(i).toString().padStart(2,"0")}`)},1e3))}function m(){clearInterval(f),f=void 0,w(r,[...p(r),{time:p(c),date:new Date,horse:p(_),id:p(s)}],!0),j(s),w(c,"00:00:00"),w(i,0),w(u,0),w(b,0)}function x(){clearInterval(f),f=void 0,w(i,0),w(u,0),w(b,0),w(c,"00:00:00")}function v(k){w(r,p(r).filter(S=>S.id!==k),!0),p(r).length>0?w(s,Math.max(...p(r).map(S=>S.id))+1):w(s,0)}var h=Nt(),g=nt(h),N=F(g,!0);D(g);var T=$(g,2),z=F(T);z.__click=[kt,_];var R=$(z,2);R.__click=[St,_],D(T);var M=$(T,2);M.__click=d;var O=$(M,2);O.__click=m;var Y=$(O,2);Y.__click=x;var se=$(Y,2),ne=$(F(se));ut(ne,21,()=>p(r),k=>k.id,(k,S)=>{var C=Tt(),I=F(C),E=F(I,!0);D(I);var y=$(I),A=F(y,!0);D(y);var V=$(y),J=F(V),we=F(J,!0);D(J),D(V);var ie=$(V,2),ke=F(ie);ke.__click=[Et,v,S],D(ie),D(C),de(Se=>{G(E,p(S).time),G(A,Se),ae(J,1,`rounded-md px-1 py-1 font-semibold
						${p(S).horse==="Charmer"?"bg-orange-400 text-white dark:bg-orange-500 dark:text-zinc-900":"bg-yellow-900 text-white dark:bg-yellow-800 dark:text-yellow-200"}`),G(we,p(S).horse)},[()=>o(p(S).date)]),ve(1,C,()=>yt,()=>({duration:125})),ve(2,C,()=>wt,()=>({x:-40,duration:125})),oe(k,C)}),D(ne),D(se),de(()=>{G(N,p(c)),ae(z,1,`w-1/2 rounded-md p-2 text-xl transition-all duration-100 ease-in-out active:scale-98 active:shadow-sm active:brightness-90
			${p(_)==="Charmer"?"bg-orange-400 text-white":"bg-gray-100 text-gray-400"}`),ae(R,1,`w-1/2 rounded-md p-2 text-xl transition-all duration-100 ease-in-out active:scale-98 active:shadow-sm active:brightness-90
			${p(_)==="Miles"?"bg-yellow-900 text-white":"bg-gray-100 text-gray-400"}`)}),oe(t,h),it()}ct(["click"]);export{$t as component};
